!function(){"use strict";function i(){var e=" -webkit- -moz- -o- -ms- ".split(" "),t=function(e){return window.matchMedia(e).matches};if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var i=["(",e.join("touch-enabled),("),"heartz",")"].join("");return t(i)}function a(e,t){var i=Object.create(null);for(var s in e)t&&t[s]?i[s]=t[s]:i[s]=e[s];return i}function r(e,t,i){for(var s=[],a=0;a<e.length;a++){var r=e[a].slice(t,i+1);"number"==typeof r[0]&&r.unshift(e[a][0]),s.push(r)}return s}function n(e){for(var t=-(1/0),i="x"===e[0][0]?1:0;i<e.length;i++)for(var s=e[i],a=1;a<s.length;a++)s[a]>t&&(t=s[a]);return t}function h(e){for(var t=1/0,i="x"===e[0][0]?1:0;i<e.length;i++)for(var s=e[i],a=1;a<s.length;a++)s[a]<t&&(t=s[a]);return t}function o(e,t,i){return 3>=t?Math.ceil(2*e)/2:t>3&&6>=t?1:t>6&&60>=t?5:t>60&&120>=t?20:t>120&&240>=t?40:Math.floor((t-e)/i)}function d(e){var t=["","k","M","B","T"],i=Math.log10(e)/3|0;if(0===i)return Math.round(e);var s=Math.pow(10,3*i),a=e/s;return a.toFixed(1)+t[i]}function l(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function p(e,t){var i=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return"rgba("+i+", "+s+", "+a+", "+t+")"}function c(e,t){var i,s,a;return t.forEach(function(t,r){var n=Math.abs(e-t);return n>=s?!0:(i=t,a=r,void(s=n))}),{value:i,index:a}}function f(e,t,i,s){return s=s||0,e.font=t,e.measureText(i).width+s}var e={id:"chart",name:null,appendTo:document.body,chart:{height:500,lineWidth:2},preview:{height:80,lineWidth:1},gridLines:6,gridLineWidth:1,"class":"lpt-chart",themeActive:"light",theme:{light:{background:"#fff",gridColor:"#f2f4f5",gridFontColor:"#96a2aa",gridFont:"300 13px sans-serif"},dark:{background:"#242f3e",gridColor:"#293544",gridFontColor:"#546778",gridFont:"300 13px sans-serif"}}},t={init:function(){this.el=document.getElementsByTagName("body")[0],this.log10Check()},log10Check:function(){"undefined"==typeof Math.log10&&(Object.prototype.log10=function(e){return Math.log(e)/Math.log(10)})}};t.init();var s=i(),v=function(t,i){this.data=t,this.options=a(e,i),this._init()};window.Chart=v,v.prototype={months:function(){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},days:function(){return["Sun","Mon","Tue","Wen","Thu","Fri","Sat"]},_init:function(){this.dpr=window.devicePixelRatio||1,this.windowWidth=window.innerWidth,this._createWrapper();var e=this.nodes.wrapper.clientWidth-parseInt(getComputedStyle(this.nodes.wrapper).paddingLeft,10)-parseInt(getComputedStyle(this.nodes.wrapper).paddingRight,10);this._createCanvas("chart",e,this.options.chart.height,this.options.id,!0,!1,this.nodes.chartWrapper),this._preparation(),this._createTooltip(),this._createCanvas("preview",e,this.options.preview.height,this.options.id+"-preview",!1,!1,this._createPreview()),this.nodes.chart=this.chart.canvas,this.nodes.preview=this.preview.canvas,this._updateNodesOffsets(),this._defineArea(),this.stepX=this.preview.area.width/(2===this.data.columns[0].length?1:this.data.columns[0].length-2),this._setStartRange(),this._createControls(),this.animateLines={};for(var t in this.data.names)this.animateLines[t]={opacity:{value:0,valueFrom:0,progress:0,rafId:0},y:{value:0,valueFrom:8*n(this.data.columns),progress:0,rafId:0},yMin:{value:0,valueFrom:0,progress:0,rafId:0}};this.yDirection="up",this._checkLines(),this._handlers(),this.redraw=!0,this._loop(),window.scrollBy(0,1)},_createWrapper:function(){var e=document.createElement("div"),t=document.createElement("div");e.className=this.options["class"],t.className=this.options["class"]+"-wrapper",e.appendChild(t),this.options.appendTo.appendChild(e),this.nodes={wrapper:e,chartWrapper:t}},_createCanvas:function(e,t,i,s,a,r,n){var h=document.createElement("canvas"),o=h.getContext("2d",{alpha:a});if(h.id=s,this[e]=o,this[e].name=e,this[e].width=t,this[e].height=i,this[e].imageSmoothingEnabled=!1,h.style.display="block",h.style.width=t+"px",h.style.height=i+"px",h.width=Math.round(t*this.dpr),h.height=Math.round(i*this.dpr),this[e].scale(this.dpr,this.dpr),r)for(var d in r)h.style[d]=r[d];n.appendChild(h)},_createPreview:function(){var e=document.createElement("div"),t=document.createElement("div"),i=document.createElement("div");e.className=this.options["class"]+"-preview",e.style.width=this.chart.width+"px",t.className=this.options["class"]+"-preview__slider",i.className=this.options["class"]+"-preview__slider_inner",t.appendChild(i),e.appendChild(t),this.nodes.wrapper.appendChild(e);var s=t.getBoundingClientRect(),a=Math.round(s.left-e.getBoundingClientRect().left),r=s.right-s.left;return t.style.transform="translate3d("+a+"px, 0, 0)",t.style.width=Math.round(r)+"px",t.style.left="0px",this.nodes.previewWrapper=e,this.nodes.previewSlider=t,this.nodes.previewSliderInner=i,e},_createTooltip:function(){var e=document.createElement("div"),t=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div");this.toolTip={},this.toolTip.tooltip=e,this.toolTip.tooltipDate=i,this.toolTip.tooltipLine=t,this.toolTip.tooltipLines={},this.toolTip.tooltipCircles={},s.className=this.options["class"]+"-tooltip-wrapper",e.className=this.options["class"]+"-tooltip",t.className=this.options["class"]+"-tooltip__line",s.appendChild(t),i.className=this.options["class"]+"-tooltip__date",e.appendChild(i);for(var a in this.data.names){var r=document.createElement("div"),n=document.createElement("div"),h=document.createElement("span");r.className=this.options["class"]+"-tooltip-line__name",r.textContent=this.data.names[a],h.style.color=this.data.colors[a],n.className=this.options["class"]+"-tooltip__circle",n.style.borderColor=this.data.colors[a],e.appendChild(r),e.appendChild(h),s.appendChild(n),this.toolTip.tooltipLines[a]=h,this.toolTip.tooltipCircles[a]=n,this.type||(this.type=this.data.types[a]),this.lineName||(this.lineName=this.data.columns[1][0])}s.appendChild(e),this.nodes.tooltipWrapper=s,this.nodes.chartWrapper.appendChild(s)},_createControls:function(){var e=this,t=document.createElement("span"),i=document.createElement("span"),s=document.createElement("div");t.className=this.options["class"]+"-name",i.className=this.options["class"]+"-date-range",s.className=this.options["class"]+"-controls";for(var a in this.data.names)if(this.data.names.hasOwnProperty(a)){var r=document.createElement("div"),n=document.createElement("input"),h=document.createElement("span"),o=document.createElement("label");r.className=this.options["class"]+"-check-wrapper",n.checked=!0,n.type="checkbox",n.id=this.options.id+"-"+a,n.onchange=function(){e._checkLines(this)},o.htmlFor=this.options.id+"-"+a,o.textContent=this.data.names[a],o.style.backgroundColor=this.data.colors[a],o.style.borderColor=this.data.colors[a],o.appendChild(h),r.appendChild(n),r.appendChild(o),s.appendChild(r)}this.options.name&&(t.textContent=this.options.name,this.nodes.chartWrapper.parentNode.insertBefore(t,this.nodes.chartWrapper)),this.chartDateRange=i,this._setDateRange(),this.nodes.chartWrapper.parentNode.insertBefore(i,this.nodes.chartWrapper),this.nodes.previewWrapper.parentNode.insertBefore(s,this.nodes.previewWrapper.nextSibling)},_setDateRange:function(){var e=this.datesFull[this.range.index0],t=this.datesFull[this.range.index1];(e!==this.prevDate1||t!==this.prevDate2)&&(this.chartDateRange.textContent=e+" - "+t,this.prevDate1=e,this.prevDate2=t)},_defineArea:function(){this.chart.paddingTop=0,this.chart.paddingBottom=60,this.chart.textPaddingBottom=10,this.chart.datesPaddingBottom=30,this.chart.area={top:this.chart.paddingTop,left:0,bottom:this.chart.height-this.chart.paddingBottom,width:this.chart.width,right:this.chart.width,height:this.chart.height-this.chart.paddingTop-this.chart.paddingBottom},this.preview.prevPointerX=0,this.preview.area={top:0,left:0,right:this.preview.width,bottom:this.options.preview.height,width:this.preview.width,height:this.options.preview.height}},_setStartRange:function(){this.range={x0:this.nodes.previewSlider.offsets.left-this.nodes.previewWrapper.offsets.left,x1:this.nodes.previewSlider.offsets.right-this.nodes.previewWrapper.offsets.left},this.range.index0=this.range.x0===this.preview.area.left?1:Math.round((this.range.x0-this.range.x0%this.stepX)/this.stepX+2),this.range.index1=this.range.x1===this.preview.area.right?this.data.columns[0].length-1:Math.round((this.range.x1-this.range.x1%this.stepX)/this.stepX+1);var e=this.data.columns;if(this.data.y_scaled)for(var t=1;t<e.length;t++)this.range[e[t][0]]={max:0,prevMax:2*n(r([e[t]],this.range.index0,this.range.index1))},this.preview[e[t][0]]={max:0,prevMax:2*n(e[t])};else this.range.prevMax=0,this.range.max=2*n(r(e,this.range.index0,this.range.index1)),this.preview.max=0,this.preview.prevMax=0},_preparation:function(){this.gridLineWidth=this.options.gridLineWidth,this.gridFont=this.options.theme[this.options.themeActive].gridFont,this.gridDateOffset=60,this.dates=["x"],this.datesFull=["x"],this.datesTooltip=["x"];for(var e=this.data.columns[0],t=1,i=e.length,s=0;i>t;t++){var a=new Date(e[t]),r=this.months()[a.getMonth()],n=a.getDate(),h=this.days()[a.getDay()],o=a.getFullYear(),d=r+" "+n,l=n+" "+r+" "+o,p=h+", "+n+" "+r+" "+o;d.length>s.length&&(s=d),this.dates.push({date:d,opacity:0}),this.datesFull.push(l),this.datesTooltip.push(p)}this.dateWidth=Math.max(f(this.chart,this.gridFont,s),60),this._updateColorScheme()},_updateColorScheme:function(){this.gridFontColor=this.options.theme[this.options.themeActive].gridFontColor,this.background=this.options.theme[this.options.themeActive].background,this.gridColor=this.options.theme[this.options.themeActive].gridColor},_drawPreview:function(){if(this.redraw=!0,this.preview.fillStyle=this.background,this.preview.fillRect(0,0,this.preview.width,this.options.preview.height),this.data.y_scaled){this.preview.clearRect(0,0,this.preview.width,this.preview.height);for(var e=0;e<this.lines.length;e++)this._drawChart(this.preview,[this.lines[e]])}else this._drawChart(this.preview)},_drawChart:function(e,t){var i=t||this.lines;if(this.data.y_scaled||e.clearRect(0,0,e.width,e.height),!i.length)return this._drawLine(e,e.area.left,e.area.bottom,e.width,e.area.bottom,this.gridLineWidth,this.gridColor),void this._drawText(e,"No data available","center","middle",e.area.width/2,e.area.height/2,this.gridFont,this.gridFontColor);var s=this,a=this.data.columns[0],l=i.length,c=this.lineName,f=this.data.y_scaled?"chart"===e.name?this.range[c]:this.preview[c]:"chart"===e.name?this.range:this.preview;if(f.max!==f.prevMax&&(this.yDirection=f.max-f.prevMax>0?"down":"up",this.animateLines[c].y.rafId&&(this.animateLines[c].y.valueFrom=this.animateLines[c].y.value,cancelAnimationFrame(this.animateLines[c].y.rafId),this.animateLines[c].y.rafId=null),this._animate(this.animateLines[c],"y",f.max,performance.now(),280,function(){s.isPreviewAnimating=!1}),f.prevMax=f.max),f.min!==f.prevMin&&(this.yDirection=f.max-f.prevMax>0?"down":"up",this.animateLines[c].yMin.rafId&&(this.animateLines[c].yMin.valueFrom=this.animateLines[c].yMin.value,cancelAnimationFrame(this.animateLines[c].yMin.rafId),this.animateLines[c].yMin.rafId=null),this._animate(this.animateLines[c],"yMin",f.min,performance.now(),280,function(){s.isPreviewAnimating=!1}),f.prevMin=f.min),"chart"===e.name){var m=r(i,this.range.index0,this.range.index1),v=n(m),u="line"===this.type?h(m):0,g=this.data.y_scaled?"y0":this.lineName;f.min=u,f.max=v;for(var w=o(u,v,this.options.gridLines),y=w*e.area.height/(v-u),x=Math.min(this.animateLines[g].yMin.progress,this.animateLines[g].y.progress),_=p(this.options.theme[this.options.themeActive].gridColor,x),L=e.area.bottom,C=e.area.bottom-e.textPaddingBottom,M="up"===this.yDirection?40:-40,S=0;S<this.options.gridLines;S++)0===S?this._drawLine(e,e.area.left,L-y*S,e.width,L-y*S,this.gridLineWidth,this.gridColor):this._drawLine(e,e.area.left,L-y*S+M-M*x,e.width,L-y*S+M-M*x,this.gridLineWidth,_)}if(e.save(),e.lineWidth=this.options[e.name].lineWidth,"preview"===e.name){var T=1,v=n(i),u="line"===this.type?h(i):0,b=e.area.right;f.max=v,f.min=u}else{e.lineJoin="round",this.coordsX=[],this.data.y_scaled||(this.coordsY={});for(var F=0;l>F;F++)this.coordsY[i[F][0]]=[];var W=this.range.x1-this.range.x0,T=e.area.width/W,b=this.range.x1}"preview"===e.name?this.animateLines[c].y.rafId&&(v=this.animateLines[c].y.value):(v=this.animateLines[c].y.value,u=this.animateLines[c].yMin.value);for(var N=0,I=this.stepX*T,X=(e.area.width-b)*T+e.area.right,P=e.area.bottom,k=e.area.height/(v-u);l>N;N++){var A=a.length-1,E=0,R=i[N];for(c=R[0],this.lineName=c,e.beginPath(),this.animateLines[c].opacity.rafId?e.strokeStyle=p(this.data.colors[c],this.animateLines[c].opacity.value):e.strokeStyle=this.data.colors[c];A>0;A--,E++){var D=X-I*E,B=X-I*(E+1),O=P-(R[A]-u)*k,z=P-(R[A-1]-u)*k;if(0===E&&e.moveTo(D,O),e.lineTo(B,z),"chart"===e.name&&0===N){var Y=(this.dateWidth+this.gridDateOffset)/I;if(I/(this.dateWidth+this.gridDateOffset)<1)var F=parseInt(Y,10);else var F=1;A%F===0&&s._drawText(e,s.dates[A].date,"right","middle",D,s.chart.height-s.chart.datesPaddingBottom,s.gridFont,p(s.gridFontColor,1))}if("chart"===e.name&&(D>=0&&D<=e.area.width&&(0===N&&this.coordsX.push(D),this.coordsY[c].push(O)),0>B))break}e.stroke()}if(e.restore(),"chart"===e.name){if(this.data.y_scaled&&"y1"===this.lineName)var j="right",J=e.area.right;else var j="left",J=0;for(var S=0;S<=this.options.gridLines;S++)if(0===S){if(this.data.y_scaled)var q=this.data.colors[c];else var q=this.options.theme[this.options.themeActive].gridFontColor;"line"===this.type?this._drawText(e,d(u),j,"alphabetic",J,C-y*S+M-M*x,this.gridFont,p(q,x)):this._drawText(e,d(w*S),j,"alphabetic",J,C-y*S,this.gridFont,q)}else 1===S&&(q=p(q,x)),"line"===this.type?this._drawText(e,d(u+w*S),j,"alphabetic",J,C-y*S+M-M*x,this.gridFont,q):this._drawText(e,d(u+w*S),j,"alphabetic",J,C-y*S+M-M*x,this.gridFont,q)}},_drawText:function(e,t,i,s,a,r,n,h){e.save(),e.font=n,e.fillStyle=h,e.textAlign=i,e.textBaseline=s,e.fillText(t,a,r),e.restore()},_drawLine:function(e,t,i,s,a,r,n){e.save(),e.beginPath(),e.strokeStyle=n,e.moveTo(t,i),e.lineTo(s,a),e.stroke(),e.restore()},_checkLines:function(e){var t=this;if(this.lines){var r=e.id.replace(this.options.id+"-","");e:for(var a=1;a<this.data.columns.length;a++)if(r===this.data.columns[a][0]){if(this.lines.length){for(var n=0;n<this.lines.length;n++)if(r===this.lines[n][0]){this.isPreviewAnimating=!0,this.animateLines[r].opacity.rafId&&(this.animateLines[r].opacity.valueFrom=this.animateLines[r].opacity.value,cancelAnimationFrame(this.animateLines[r].opacity.rafId),this.animateLines[r].opacity.rafId=null),this._animate(t.animateLines[r],"opacity",0,performance.now(),280,function(){t.lines.splice(n,1),e.checked=!1,t.isPreviewAnimating=!1,t.lines.length||t.preview.fillRect(0,0,t.preview.width,t.preview.height)});break e}this.lines.push(this.data.columns[a]),this.isPreviewAnimating=!0,this.animateLines[r].opacity.rafId&&(this.animateLines[r].opacity.valueFrom=this.animateLines[r].opacity.value,cancelAnimationFrame(this.animateLines[r].opacity.rafId),this.animateLines[r].opacity.rafId=null),this._animate(t.animateLines[r],"opacity",1,performance.now(),280,function(){t.isPreviewAnimating=!1,e.checked=!0})}else{this.isPreviewAnimating=!0,this.lines.push(this.data.columns[a]);var h=Math.max.apply(null,this.data.columns[a].slice(1));this.data.y_scaled?this.range[r].max=16*h:this.range.max=16*h,this.animateLines[r].opacity.rafId&&(this.animateLines[r].opacity.valueFrom=this.animateLines[r].opacity.value,cancelAnimationFrame(this.animateLines[r].opacity.rafId),this.animateLines[r].opacity.rafId=null),this._animate(t.animateLines[r],"opacity",1,performance.now(),240,function(){t.isPreviewAnimating=!1,e.checked=!0})}break}this.lines.sort()}else{var i=[];for(var s in this.data.names){if(this.data.names.hasOwnProperty(s)){var e=document.getElementById(this.options.id+"-"+s);if(e&&e.checked)for(var a=1;a<this.data.columns.length;a++)this.data.columns[a][0]===e.id.replace(this.options.id+"-","")&&i.push(this.data.columns[a])}this.lines=i,this._animate(this.animateLines[s],"opacity",1,performance.now(),280)}}this.data.y_scaled?(this.range[this.lineName].min&&(this.range[this.lineName].prevMin=this.range[this.lineName].min-1),this.range[this.lineName].max&&(this.range[this.lineName].prevMax=this.range[this.lineName].max+1)):(this.range.min&&(this.range.prevMin=this.range.min-1,this.preview.prevMin=this.preview.min-1),this.range.max&&(this.range.prevMax=this.range.max+1,this.preview.prevMax=this.preview.max+1)),this.redraw=!0,this.isPreviewAnimating=!0,this._drawPreview()},_handlers:function(){function t(t){if(!e.lines.length)return void(e.nodes.tooltipWrapper.style.display="none");e.nodes.tooltipWrapper.removeAttribute("style");var i=t.touches?t.touches[0].clientX:t.clientX,s=this.offsets;i-s.left<e.chart.area.left?e.chart.pointerX=e.chart.area.left:e.chart.pointerX=i-s.left,e.chart.clientX=i-s.left,e._drawTooltip()}function i(t){var i=t.touches?t.touches[0].clientX:t.clientX,s=e.nodes.previewSlider.offsets,a=22;e.nodes.previewSlider.dragStart=i,e.nodes.previewSlider.fromLeft=i-s.left,e.nodes.previewSlider.fromRight=s.right-i,i-s.left<=a?e.nodes.previewSlider.resizer="left":s.right-i<=a?e.nodes.previewSlider.resizer="right":e.nodes.previewSlider.drag=!0}function a(t){e.nodes.previewSlider.drag=!1,e.nodes.previewSlider.resizer=!1,e._updateNodesOffsets()}function r(t){var i=t.touches?t.touches[0].clientX:t.clientX;t.touches?t.touches[0].clientY:t.clientY;if((e.nodes.previewSlider.drag||e.nodes.previewSlider.resizer)&&e.nodes.previewSlider.dragStart!==i){e.preview.pointerX=i;var m,v,a=e.nodes.previewSlider.offsets,r=e.nodes.previewWrapper.offsets,n=r.width,h=a.left-r.left,o=a.right-r.left,d=a.width,l=i-r.left,p=e.nodes.previewSlider.fromLeft,c=e.nodes.previewSlider.fromRight,f=52;if(e.nodes.previewSlider.resizer){if("left"===e.nodes.previewSlider.resizer)if(l-p>=0&&o-f>=l-p)m=l-p,v=o-m,e.nodes.previewSlider.style.transform="translate3d("+m+"px, 0, 0)",e.nodes.previewSlider.style.width=v+"px";else{if(!(0>l-p))return;m=0,v=o-m,e.nodes.previewSlider.style.transform="translate3d("+m+"px, 0, 0)",e.nodes.previewSlider.style.width=v+"px"}else if("right"===e.nodes.previewSlider.resizer)if(n>=l+c&&l+c>=h+f)m=h,v=l+c-h,e.nodes.previewSlider.style.transform="translate3d("+m+"px, 0, 0)",e.nodes.previewSlider.style.width=v+"px";else{if(!(l+c>n))return;m=h,v=n-h,e.nodes.previewSlider.style.width=v+"px"}}else e.nodes.previewSlider.drag&&(l-p>=0&&n>=l+c?(m=l-p,v=d,e.nodes.previewSlider.style.transform="translate3d("+m+"px, 0, 0)"):0>l-p?(m=0,v=d,e.nodes.previewSlider.style.transform="translate3d("+m+"px, 0, 0)",e.nodes.previewSlider.style.width=v+"px"):l+c>n&&(m=n-d,v=d,e.nodes.previewSlider.style.transform="translate3d("+m+"px, 0, 0)"));e.range.x0=Math.round(m),e.range.x1=Math.round(m+v),e.range.index0=e.range.x0===e.preview.area.left?1:Math.round((e.range.x0-e.range.x0%e.stepX)/e.stepX+2),e.range.index1=e.range.x1===e.preview.area.right?e.data.columns[0].length-1:Math.round((e.range.x1-e.range.x1%e.stepX)/e.stepX+1),e._setDateRange()}}var e=this;this.nodes.chart[s?"ontouchmove":"onmousemove"]=t,this.nodes.chart.onclick=t,this.nodes.previewSlider.addEventListener(s?"touchstart":"mousedown",i,!1),document.addEventListener(s?"touchend":"mouseup",a,!1),this.nodes.wrapper.addEventListener(s?"touchmove":"mousemove",r,!1),window.addEventListener("resize",function(){window.innerWidth!==e.windowWidth&&(e.windowWidth=window.innerWidth,e._onResize())}),window.addEventListener("scroll",function(){e._updateNodesOffsets()})},_updateNodesOffsets:function(){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e)){var t=this.nodes[e].getBoundingClientRect();this.nodes[e].offsets={top:Math.round(t.top),left:Math.round(t.left),right:Math.round(t.right),bottom:Math.round(t.bottom),width:Math.round(t.right-t.left),height:Math.round(t.bottom-t.top)}}},_onResize:function(){this.dpr=window.devicePixelRatio||1;var e=this.nodes.wrapper.clientWidth-parseInt(getComputedStyle(this.nodes.wrapper).paddingLeft,10)-parseInt(getComputedStyle(this.nodes.wrapper).paddingRight,10),t=this.nodes.previewWrapper.clientWidth,i=this.nodes.previewSlider.getBoundingClientRect(),n=(this.nodes.previewSlider.getBoundingClientRect().left,i.left,i.right-i.left,t/e);this.nodes.previewSlider.style.transform="translate3d("+this.range.x0/n+"px, 0, 0)",this.nodes.previewSlider.style.width=(this.range.x1-this.range.x0)/n+"px",this.range.x0/=n,this.range.x1/=n,this.chart.width=e,this.preview.width=e,this.nodes.chart.style.width=e+"px",this.nodes.chart.width=Math.round(e*this.dpr),this.nodes.preview.style.width=e+"px",this.nodes.preview.width=Math.round(e*this.dpr),this.nodes.previewWrapper.style.width=e+"px",this.chart.scale(this.dpr,this.dpr),this.preview.scale(this.dpr,this.dpr),this._updateNodesOffsets(),this._defineArea(),this.stepX=e/(2===this.data.columns[0].length?1:this.data.columns[0].length-2)},_loop:function(){var e=this;this.preview.prevPointerX!==this.preview.pointerX&&(this.preview.prevPointerX=this.preview.pointerX,this.redraw=!0),this._render(),requestAnimationFrame(function(){e._loop()})},_render:function(){if(this.redraw){if(this.data.y_scaled){this.chart.clearRect(0,0,this.chart.width,this.chart.height),this.data.y_scaled&&(this.coordsY={});for(var e=0;e<this.lines.length;e++)this._drawChart(this.chart,[this.lines[e]])}else this._drawChart(this.chart);(this.isPreviewAnimating||!this.preview.pointerX)&&this._drawPreview(),this.redraw=!1}},_animate:function(e,t,i,s,a,r){this.redraw=!0;var p,n=arguments,h=this,o=performance.now()-s,d=e[t].valueFrom,l=o/a;l>1&&(l=1,o=a),p=d+l*(i-d),a>o?(e[t].value=p,e[t].progress=l,e[t].rafId=requestAnimationFrame(function(){h._animate.apply(h,n)})):(e[t].rafId=null,e[t].value=p,e[t].valueFrom=p,e[t].progress=l,r&&r())},_drawTooltip:function(){var e=c(this.chart.pointerX,this.coordsX);if("undefined"===this.chart.prevNearest||this.chart.prevNearest!==e.index){var t=this.datesTooltip.slice(this.range.index0,this.range.index1+1),i=t[t.length-1-e.index],s=this.lines.length,a=this.toolTip.tooltip.clientWidth,r=10,n=this.toolTip.tooltipLines,h=this.toolTip.tooltipCircles,o=0;if(this.chart.pointerX<this.chart.area.width/2)var d=this.chart.pointerX+r;else var d=this.chart.pointerX-r-a;for(this.toolTip.tooltipDate.textContent=i,this.toolTip.tooltip.style.setProperty("transform","translate3d("+d+"px, 0, 0"),this.toolTip.tooltipLine.style.setProperty("transform","translate3d("+e.value+"px, 0, 0");s>o;o++){var p=this.lines[o].slice(this.range.index0,this.range.index1+1),f=l(p[p.length-1-e.index]),m=this.lines[o][0];n[m].textContent=f,n[m].className="fadein"===n[m].className?"fadeout":"fadein",h[m].style.setProperty("transform","translate3d("+e.value+"px, "+this.coordsY[m][e.index]+"px, 0)")}this.chart.prevNearest=e.index}}}}();